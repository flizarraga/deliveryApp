System.registerDynamic("src/services/ng2-jwt",["angular2/core","angular2/http","rxjs/Observable"],!0,function(a,b,c){function d(a,b){var c,d=a||"id_token";c=b?b:localStorage.getItem(d);var e=new n;return!c||e.isTokenExpired(c,null)?!1:!0}var e=this,f=e.define;e.define=void 0;var g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},i=a("angular2/core"),j=a("angular2/http"),k=a("rxjs/Observable"),l=function(){function a(a){var b=this;this.config=a||{},this.headerName=this.config.headerName||"Authorization",this.headerPrefix=this.config.headerPrefix+" "||"Bearer ",this.tokenName=this.config.tokenName||"id_token",this.noJwtError=this.config.noJwtError||!1,this.tokenGetter=this.config.tokenGetter||function(){return localStorage.getItem(b.tokenName)}}return a.prototype.getConfig=function(){return{headerName:this.headerName,headerPrefix:this.headerPrefix,tokenName:this.tokenName,tokenGetter:this.tokenGetter,noJwtError:this.noJwtError}},a}();b.AuthConfig=l;var m=function(){function a(a,b){var c=this;this.http=b,this._config=a.getConfig(),this.tokenStream=new k.Observable(function(a){a.next(c._config.tokenGetter())})}return a.prototype._request=function(a,b){var c;if(d(null,this._config.tokenGetter()))if("string"==typeof a){var e=b||{};e.headers||(e.headers=new j.Headers),e.headers.set(this._config.headerName,this._config.headerPrefix+this._config.tokenGetter()),c=this.http.request(a,e)}else{var f=a;f.headers||(f.headers=new j.Headers),f.headers.set(this._config.headerName,this._config.headerPrefix+this._config.tokenGetter()),c=this.http.request(f)}else{if(!this._config.noJwtError)throw"Invalid JWT";c=this.http.request(a,b)}return c},a.prototype.requestHelper=function(a,b){var c=new j.RequestOptions(a);return b&&(c=c.merge(b)),this._request(new j.Request(c))},a.prototype.get=function(a,b){return this.requestHelper({url:a,method:j.RequestMethod.Get},b)},a.prototype.post=function(a,b,c){return this.requestHelper({url:a,body:b,method:j.RequestMethod.Post},c)},a.prototype.put=function(a,b,c){return this.requestHelper({url:a,body:b,method:j.RequestMethod.Put},c)},a.prototype["delete"]=function(a,b){return this.requestHelper({url:a,method:j.RequestMethod.Delete},b)},a.prototype.patch=function(a,b,c){return this.requestHelper({url:a,body:b,method:j.RequestMethod.Patch},c)},a.prototype.head=function(a,b){return this.requestHelper({url:a,method:j.RequestMethod.Head},b)},a=g([i.Injectable(),h("design:paramtypes",[l,j.Http])],a)}();b.AuthHttp=m;var n=function(){function a(){}return a.prototype.urlBase64Decode=function(a){var b=a.replace(/-/g,"+").replace(/_/g,"/");switch(b.length%4){case 0:break;case 2:b+="==";break;case 3:b+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(b)))},a.prototype.decodeToken=function(a){var b=a.split(".");if(3!==b.length)throw new Error("JWT must have 3 parts");var c=this.urlBase64Decode(b[1]);if(!c)throw new Error("Cannot decode the token");return JSON.parse(c)},a.prototype.getTokenExpirationDate=function(a){var b;if(b=this.decodeToken(a),"undefined"==typeof b.exp)return null;var c=new Date(0);return c.setUTCSeconds(b.exp),c},a.prototype.isTokenExpired=function(a,b){var c=this.getTokenExpirationDate(a);return b=b||0,null===c?!1:!(c.valueOf()>(new Date).valueOf()+1e3*b)},a}();return b.JwtHelper=n,b.tokenNotExpired=d,e.define=f,c.exports}),System.registerDynamic("ng2-jwt",["./src/services/ng2-jwt"],!0,function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=this,f=e.define;e.define=void 0;var g=a("./src/services/ng2-jwt");return d(a("./src/services/ng2-jwt")),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={providers:[g.AuthHttp,g.AuthConfig,g.JwtHelper]},e.define=f,c.exports});
//# sourceMappingURL=ng2-jwt.min.js.map